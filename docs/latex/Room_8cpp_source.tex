\doxysection{Room.\+cpp}
\hypertarget{Room_8cpp_source}{}\label{Room_8cpp_source}\index{/home/speedie/libleet/src/Room.cpp@{/home/speedie/libleet/src/Room.cpp}}
\mbox{\hyperlink{Room_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*\ libleet}}
\DoxyCodeLine{00002\ \textcolor{comment}{\ *\ Matrix\ client\ library\ written\ in\ C++}}
\DoxyCodeLine{00003\ \textcolor{comment}{\ *\ Licensed\ under\ the\ GNU\ Affero\ General\ Public\ License\ version\ 3.}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ *\ See\ included\ LICENSE\ file\ for\ more\ information.}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ *\ https://git.speedie.site/speedie/libleet}}
\DoxyCodeLine{00007\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00008\ }
\DoxyCodeLine{00009\ \textcolor{comment}{/*\ Converts\ an\ alias\ to\ a\ proper\ room\ ID\ */}}
\DoxyCodeLine{00010\ \textcolor{keyword}{const}\ std::string\ \mbox{\hyperlink{namespaceleet_af66fefe88b0d6ee698399cbb9d5de650}{leet::findRoomID}}(std::string\ Alias)\ \{}
\DoxyCodeLine{00011\ \ \ \ \ \textcolor{keyword}{using\ }json\ =\ nlohmann::json;}
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00013\ \ \ \ \ \mbox{\hyperlink{namespaceleet_aa20a9fa2de98421d60165559a8a23f76}{leet::errorCode}}\ =\ 0;}
\DoxyCodeLine{00014\ }
\DoxyCodeLine{00015\ \ \ \ \ \textcolor{keywordflow}{if}\ (Alias[0]\ ==\ \textcolor{charliteral}{'!'})\ \{\ \textcolor{comment}{//\ It's\ a\ proper\ room\ ID\ already}}
\DoxyCodeLine{00016\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ Alias;}
\DoxyCodeLine{00017\ \ \ \ \ \}}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \ \ \ \ \textcolor{comment}{//\ Replace\ the\ '\#'\ character\ with\ '\%23'\ so\ that\ Matrix\ is\ happy}}
\DoxyCodeLine{00020\ \ \ \ \ Alias.replace(0,\ 1,\ \textcolor{stringliteral}{"{}\%23"{}});}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ \ \ \ \ \textcolor{keyword}{const}\ std::string\ Output\ =\ \mbox{\hyperlink{namespaceleet_a87681d6edf2064da9cf4df3dcb3ac67e}{leet::invokeRequest\_Get}}(\mbox{\hyperlink{namespaceleet_abf8deb3b48c9f7322aa6654885946738}{leet::getAPI}}(\textcolor{stringliteral}{"{}/\_matrix/client/v3/directory/room/"{}})\ +\ Alias);}
\DoxyCodeLine{00023\ \ \ \ \ json\ reqOutput;}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{00026\ \ \ \ \ \ \ \ \ reqOutput\ =\ \{\ json::parse(Output)\ \};}
\DoxyCodeLine{00027\ \ \ \ \ \}\ \textcolor{keywordflow}{catch}\ (\textcolor{keyword}{const}\ json::parse\_error\&\ e)\ \{}
\DoxyCodeLine{00028\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00029\ \ \ \ \ \}}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ output\ :\ reqOutput)\ \{}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (output[\textcolor{stringliteral}{"{}room\_id"{}}].is\_string())\ \{}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceleet_aa20a9fa2de98421d60165559a8a23f76}{leet::errorCode}}\ =\ 0;}
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ output[\textcolor{stringliteral}{"{}room\_id"{}}].get<std::string>();}
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (!output[\textcolor{stringliteral}{"{}errcode"{}}].is\_null())\ \{}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceleet_aa20a9fa2de98421d60165559a8a23f76}{leet::errorCode}}\ =\ 1;}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceleet_ae7fadb8f554b82e37512ece5f451e345}{leet::Error}}\ =\ output[\textcolor{stringliteral}{"{}errcode"{}}].get<std::string>();}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (output[\textcolor{stringliteral}{"{}error"{}}].is\_string())\ \mbox{\hyperlink{namespaceleet_aca8cf23cb2471b07f1ee22a2077b5b37}{leet::friendlyError}}\ =\ output[\textcolor{stringliteral}{"{}error"{}}].get<std::string>();}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00042\ \ \ \ \ \}}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00044\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00045\ \}}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ \textcolor{comment}{/*\ Returns\ an\ array\ of\ all\ rooms\ */}}
\DoxyCodeLine{00048\ \textcolor{keyword}{const}\ std::vector<leet::Room::Room>\ \mbox{\hyperlink{namespaceleet_a0becdb7d81d60ba11e9b196c2ac312f7}{leet::returnRooms}}(\mbox{\hyperlink{classleet_1_1User_1_1CredentialsResponse}{leet::User::CredentialsResponse}}*\ resp,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ Limit)\ \{}
\DoxyCodeLine{00049\ \ \ \ \ \textcolor{keyword}{using\ }json\ =\ nlohmann::json;}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00051\ \ \ \ \ std::vector<leet::Room::Room>\ vector;}
\DoxyCodeLine{00052\ \ \ \ \ std::vector<leet::Room::Room>\ vectorWithVal;}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{keyword}{const}\ std::string\ Output\ =\ \mbox{\hyperlink{namespaceleet_a87681d6edf2064da9cf4df3dcb3ac67e}{leet::invokeRequest\_Get}}(\mbox{\hyperlink{namespaceleet_abf8deb3b48c9f7322aa6654885946738}{leet::getAPI}}(\textcolor{stringliteral}{"{}/\_matrix/client/v3/joined\_rooms"{}}),\ resp-\/>\mbox{\hyperlink{classleet_1_1User_1_1CredentialsResponse_ae4d15192559f009ad966de4bc9cdf58a}{accessToken}});}
\DoxyCodeLine{00055\ \ \ \ \ json\ returnOutput;}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00057\ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ returnOutput\ =\ json::parse(Output);}
\DoxyCodeLine{00059\ \ \ \ \ \}\ \textcolor{keywordflow}{catch}\ (\textcolor{keyword}{const}\ json::parse\_error\&\ e)\ \{}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ vector;}
\DoxyCodeLine{00061\ \ \ \ \ \}}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00063\ \ \ \ \ \textcolor{keyword}{auto}\&\ rooms\ =\ returnOutput[\textcolor{stringliteral}{"{}joined\_rooms"{}}];}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ it\ =\ rooms.begin();\ it\ !=\ rooms.end();\ ++it)\ \{}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classleet_1_1Room_1_1Room}{leet::Room::Room}}\ room;}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ room.\mbox{\hyperlink{classleet_1_1Room_1_1Room_a845bb4727d6c821e8d69a15ad0e2eb1f}{roomID}}\ =\ it.value();}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ vector.push\_back(room);}
\DoxyCodeLine{00069\ \ \ \ \ \}}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00071\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ it\ :\ vector)\ \{}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classleet_1_1Room_1_1Room}{leet::Room::Room}}\ room\ =\ \mbox{\hyperlink{namespaceleet_a20ad1f62e70791be89e97ef10a2e17e8}{leet::returnRoom}}(resp,\ \&it);}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ vectorWithVal.push\_back(room);}
\DoxyCodeLine{00075\ \ \ \ \ \}}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \ \ \ \ \textcolor{keywordflow}{return}\ vectorWithVal;}
\DoxyCodeLine{00078\ \}}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00080\ \textcolor{comment}{/*\ Returns\ a\ single\ room\ based\ on\ the\ room\ ID\ */}}
\DoxyCodeLine{00081\ \mbox{\hyperlink{classleet_1_1Room_1_1Room}{leet::Room::Room}}\ \mbox{\hyperlink{namespaceleet_a20ad1f62e70791be89e97ef10a2e17e8}{leet::returnRoom}}(\mbox{\hyperlink{classleet_1_1User_1_1CredentialsResponse}{leet::User::CredentialsResponse}}*\ resp,\ \mbox{\hyperlink{classleet_1_1Room_1_1Room}{leet::Room::Room}}*\ room)\ \{}
\DoxyCodeLine{00082\ \ \ \ \ \textcolor{keyword}{using\ }json\ =\ nlohmann::json;}
\DoxyCodeLine{00083\ \ \ \ \ \mbox{\hyperlink{classleet_1_1Room_1_1Room}{leet::Room::Room}}\ theRoom;}
\DoxyCodeLine{00084\ \ \ \ \ json\ returnOutput;}
\DoxyCodeLine{00085\ }
\DoxyCodeLine{00086\ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ returnOutput\ =\ json::parse(\mbox{\hyperlink{namespaceleet_a87681d6edf2064da9cf4df3dcb3ac67e}{leet::invokeRequest\_Get}}(\mbox{\hyperlink{namespaceleet_abf8deb3b48c9f7322aa6654885946738}{leet::getAPI}}(\textcolor{stringliteral}{"{}/\_matrix/client/v1/rooms/"{}}\ +\ room-\/>\mbox{\hyperlink{classleet_1_1Room_1_1Room_a845bb4727d6c821e8d69a15ad0e2eb1f}{roomID}}\ +\ \textcolor{stringliteral}{"{}/hierarchy"{}}),\ resp-\/>\mbox{\hyperlink{classleet_1_1User_1_1CredentialsResponse_ae4d15192559f009ad966de4bc9cdf58a}{accessToken}}));}
\DoxyCodeLine{00088\ \ \ \ \ \}\ \textcolor{keywordflow}{catch}\ (\textcolor{keyword}{const}\ json::parse\_error\&\ e)\ \{}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ theRoom;}
\DoxyCodeLine{00090\ \ \ \ \ \}}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00092\ \ \ \ \ \textcolor{keyword}{auto}\&\ roomOutput\ =\ returnOutput[\textcolor{stringliteral}{"{}rooms"{}}];}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00094\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ i\ =\ roomOutput.begin();\ i\ !=\ roomOutput.end();\ ++i)\ \{}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (i.value().contains(\textcolor{stringliteral}{"{}room\_id"{}}))\ theRoom.\mbox{\hyperlink{classleet_1_1Room_1_1Room_a845bb4727d6c821e8d69a15ad0e2eb1f}{roomID}}\ =\ i.value()[\textcolor{stringliteral}{"{}room\_id"{}}];}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (i.value().contains(\textcolor{stringliteral}{"{}join\_rule"{}}))\ theRoom.\mbox{\hyperlink{classleet_1_1Room_1_1Room_ad0ab315f7274216739745338efe29f07}{joinRule}}\ =\ i.value()[\textcolor{stringliteral}{"{}join\_rule"{}}];}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (i.value().contains(\textcolor{stringliteral}{"{}avatar\_url"{}}))\ theRoom.\mbox{\hyperlink{classleet_1_1Room_1_1Room_ab1052fe37c147c30584aff43b4b069ff}{avatarURL}}\ =\ i.value()[\textcolor{stringliteral}{"{}avatar\_url"{}}];}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (i.value().contains(\textcolor{stringliteral}{"{}canonical\_alias"{}}))\ theRoom.\mbox{\hyperlink{classleet_1_1Room_1_1Room_a0538af516a75049404ec9539fe7fb840}{Alias}}\ =\ i.value()[\textcolor{stringliteral}{"{}canonical\_alias"{}}];}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (i.value().contains(\textcolor{stringliteral}{"{}name"{}}))\ theRoom.\mbox{\hyperlink{classleet_1_1Room_1_1Room_a6b5746c5c53d42034dec46e2cf6189de}{Name}}\ =\ i.value()[\textcolor{stringliteral}{"{}name"{}}];}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (i.value().contains(\textcolor{stringliteral}{"{}num\_joined\_members"{}}))\ theRoom.\mbox{\hyperlink{classleet_1_1Room_1_1Room_af13dd9a222670785bce39a8f37781261}{memberCount}}\ =\ i.value()[\textcolor{stringliteral}{"{}num\_joined\_members"{}}];}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (i.value().contains(\textcolor{stringliteral}{"{}topic"{}}))\ theRoom.\mbox{\hyperlink{classleet_1_1Room_1_1Room_a5c8cea2c4db4c9b61ae036cc1916bc1e}{Topic}}\ =\ i.value()[\textcolor{stringliteral}{"{}topic"{}}];}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (i.value().contains(\textcolor{stringliteral}{"{}guest\_can\_join"{}}))\ theRoom.\mbox{\hyperlink{classleet_1_1Room_1_1Room_ab59f5c2b57fde7afa34889351df89487}{guestCanJoin}}\ =\ i.value()[\textcolor{stringliteral}{"{}guest\_can\_join"{}}];}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (i.value().contains(\textcolor{stringliteral}{"{}world\_readable"{}}))\ theRoom.\mbox{\hyperlink{classleet_1_1Room_1_1Room_a298b5a68814b235f8a4b06b9c53ce037}{worldReadable}}\ =\ i.value()[\textcolor{stringliteral}{"{}world\_readable"{}}];}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (i.value().contains(\textcolor{stringliteral}{"{}room\_type"{}}))\ theRoom.\mbox{\hyperlink{classleet_1_1Room_1_1Room_aaeec2e60131518470891846c91383e99}{roomType}}\ =\ i.value()[\textcolor{stringliteral}{"{}room\_type"{}}];}
\DoxyCodeLine{00105\ \ \ \ \ \}}
\DoxyCodeLine{00106\ }
\DoxyCodeLine{00107\ \ \ \ \ \textcolor{keywordflow}{return}\ theRoom;}
\DoxyCodeLine{00108\ \}}
\DoxyCodeLine{00109\ }
\DoxyCodeLine{00110\ \mbox{\hyperlink{classleet_1_1Room_1_1Room}{leet::Room::Room}}\ \mbox{\hyperlink{namespaceleet_aeec1a06048a9cba651c0f494ab7cdb2c}{leet::createRoom}}(\mbox{\hyperlink{classleet_1_1User_1_1CredentialsResponse}{leet::User::CredentialsResponse}}*\ resp,\ \mbox{\hyperlink{classleet_1_1Room_1_1RoomConfiguration}{leet::Room::RoomConfiguration}}*\ conf)\ \{}
\DoxyCodeLine{00111\ \ \ \ \ \textcolor{keyword}{using\ }json\ =\ nlohmann::json;}
\DoxyCodeLine{00112\ }
\DoxyCodeLine{00113\ \ \ \ \ \mbox{\hyperlink{classleet_1_1Room_1_1Room}{leet::Room::Room}}\ theRoom;}
\DoxyCodeLine{00114\ \ \ \ \ json\ theJson;}
\DoxyCodeLine{00115\ }
\DoxyCodeLine{00116\ \ \ \ \ theJson[\textcolor{stringliteral}{"{}creation\_content"{}}][\textcolor{stringliteral}{"{}m.federate"{}}]\ =\ conf-\/>\mbox{\hyperlink{classleet_1_1Room_1_1RoomConfiguration_a7e5f488e18d862f3c4655f798ed7115b}{Federate}};}
\DoxyCodeLine{00117\ \ \ \ \ theJson[\textcolor{stringliteral}{"{}name"{}}]\ =\ conf-\/>\mbox{\hyperlink{classleet_1_1Room_1_1RoomConfiguration_a8c2f5543102d07f01e208b2e60b4e11c}{Name}};}
\DoxyCodeLine{00118\ \ \ \ \ theJson[\textcolor{stringliteral}{"{}room\_alias\_name"{}}]\ =\ conf-\/>\mbox{\hyperlink{classleet_1_1Room_1_1RoomConfiguration_a488931db81d40d8a5a6c5171c1953bc9}{Alias}};}
\DoxyCodeLine{00119\ \ \ \ \ theJson[\textcolor{stringliteral}{"{}topic"{}}]\ =\ conf-\/>\mbox{\hyperlink{classleet_1_1Room_1_1RoomConfiguration_a6ad56cafb86bf46d037df0895766723c}{Topic}};}
\DoxyCodeLine{00120\ \ \ \ \ theJson[\textcolor{stringliteral}{"{}is\_direct"{}}]\ =\ conf-\/>\mbox{\hyperlink{classleet_1_1Room_1_1RoomConfiguration_adf72ed90c288c8c27def497cd29802be}{directMessage}};}
\DoxyCodeLine{00121\ }
\DoxyCodeLine{00122\ \ \ \ \ \textcolor{keywordflow}{if}\ (conf-\/>\mbox{\hyperlink{classleet_1_1Room_1_1RoomConfiguration_a7bbba753f1a30732f9ab172d91f45eb0}{Preset}}\ ==\ \mbox{\hyperlink{libleet_8hpp_a99fb83031ce9923c84392b4e92f956b5afce12095afb56b5f2cc3d2f8d9cac6e0}{LEET\_PRESET\_PUBLIC}})\ \{}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ theJson[\textcolor{stringliteral}{"{}preset"{}}]\ =\ \textcolor{stringliteral}{"{}public\_chat"{}};}
\DoxyCodeLine{00124\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (conf-\/>\mbox{\hyperlink{classleet_1_1Room_1_1RoomConfiguration_a7bbba753f1a30732f9ab172d91f45eb0}{Preset}}\ ==\ \mbox{\hyperlink{libleet_8hpp_a99fb83031ce9923c84392b4e92f956b5a15c58dbe9e3cf5597283ce336d808378}{LEET\_PRESET\_PRIVATE}})\ \{}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ theJson[\textcolor{stringliteral}{"{}preset"{}}]\ =\ \textcolor{stringliteral}{"{}private\_chat"{}};}
\DoxyCodeLine{00126\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (conf-\/>\mbox{\hyperlink{classleet_1_1Room_1_1RoomConfiguration_a7bbba753f1a30732f9ab172d91f45eb0}{Preset}}\ ==\ \mbox{\hyperlink{libleet_8hpp_a99fb83031ce9923c84392b4e92f956b5aa78999be4375c94da01fe1ca4073dfbd}{LEET\_PRESET\_TRUSTED\_PRIVATE}})\ \{}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ theJson[\textcolor{stringliteral}{"{}preset"{}}]\ =\ \textcolor{stringliteral}{"{}trusted\_private\_chat"{}};}
\DoxyCodeLine{00128\ \ \ \ \ \}}
\DoxyCodeLine{00129\ }
\DoxyCodeLine{00130\ \ \ \ \ \textcolor{keyword}{const}\ std::string\ Output\ =\ \mbox{\hyperlink{namespaceleet_aa88a91a144b2176d9ce3c4cad3c45bab}{leet::invokeRequest\_Post}}(\mbox{\hyperlink{namespaceleet_abf8deb3b48c9f7322aa6654885946738}{leet::getAPI}}(\textcolor{stringliteral}{"{}/\_matrix/client/v3/createRoom"{}}),\ theJson.dump(),\ resp-\/>\mbox{\hyperlink{classleet_1_1User_1_1CredentialsResponse_ae4d15192559f009ad966de4bc9cdf58a}{accessToken}});}
\DoxyCodeLine{00131\ \ \ \ \ json\ reqOutput;}
\DoxyCodeLine{00132\ }
\DoxyCodeLine{00133\ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ reqOutput\ =\ \{\ json::parse(Output)\ \};}
\DoxyCodeLine{00135\ \ \ \ \ \}\ \textcolor{keywordflow}{catch}\ (\textcolor{keyword}{const}\ json::parse\_error\&\ e)\ \{}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ theRoom;}
\DoxyCodeLine{00137\ \ \ \ \ \}}
\DoxyCodeLine{00138\ }
\DoxyCodeLine{00139\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ output\ :\ reqOutput)\ \{}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceleet_aa20a9fa2de98421d60165559a8a23f76}{leet::errorCode}}\ =\ 0;}
\DoxyCodeLine{00141\ }
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (output[\textcolor{stringliteral}{"{}room\_id"{}}].is\_string())\ theRoom.\mbox{\hyperlink{classleet_1_1Room_1_1Room_a845bb4727d6c821e8d69a15ad0e2eb1f}{roomID}}\ =\ output[\textcolor{stringliteral}{"{}room\_id"{}}].get<std::string>();}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (output[\textcolor{stringliteral}{"{}errcode"{}}].is\_string())\ \mbox{\hyperlink{namespaceleet_ae7fadb8f554b82e37512ece5f451e345}{leet::Error}}\ =\ output[\textcolor{stringliteral}{"{}errcode"{}}].get<std::string>();}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (output[\textcolor{stringliteral}{"{}error"{}}].is\_string())\ \mbox{\hyperlink{namespaceleet_aca8cf23cb2471b07f1ee22a2077b5b37}{leet::friendlyError}}\ =\ output[\textcolor{stringliteral}{"{}error"{}}].get<std::string>();}
\DoxyCodeLine{00145\ \ \ \ \ \}}
\DoxyCodeLine{00146\ }
\DoxyCodeLine{00147\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespaceleet_a20ad1f62e70791be89e97ef10a2e17e8}{leet::returnRoom}}(resp,\ \&theRoom);}
\DoxyCodeLine{00148\ \}}
\DoxyCodeLine{00149\ }
\DoxyCodeLine{00150\ \textcolor{comment}{/*\ Returns\ an\ array\ of\ all\ room\ IDs\ */}}
\DoxyCodeLine{00151\ \textcolor{keyword}{const}\ std::vector<leet::Room::Room>\ \mbox{\hyperlink{namespaceleet_ae4179f205bbcae31f1332c5daff19630}{leet::returnRoomIDs}}(\mbox{\hyperlink{classleet_1_1User_1_1CredentialsResponse}{leet::User::CredentialsResponse}}*\ resp)\ \{}
\DoxyCodeLine{00152\ \ \ \ \ \textcolor{keyword}{using\ }json\ =\ nlohmann::json;}
\DoxyCodeLine{00153\ }
\DoxyCodeLine{00154\ \ \ \ \ std::vector<leet::Room::Room>\ vector;}
\DoxyCodeLine{00155\ }
\DoxyCodeLine{00156\ \ \ \ \ \textcolor{keyword}{const}\ std::string\ Output\ =\ \mbox{\hyperlink{namespaceleet_a87681d6edf2064da9cf4df3dcb3ac67e}{leet::invokeRequest\_Get}}(\mbox{\hyperlink{namespaceleet_abf8deb3b48c9f7322aa6654885946738}{leet::getAPI}}(\textcolor{stringliteral}{"{}/\_matrix/client/v3/joined\_rooms"{}}),\ resp-\/>\mbox{\hyperlink{classleet_1_1User_1_1CredentialsResponse_ae4d15192559f009ad966de4bc9cdf58a}{accessToken}});}
\DoxyCodeLine{00157\ \ \ \ \ json\ returnOutput;}
\DoxyCodeLine{00158\ }
\DoxyCodeLine{00159\ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ returnOutput\ =\ json::parse(Output);}
\DoxyCodeLine{00161\ \ \ \ \ \}\ \textcolor{keywordflow}{catch}\ (\textcolor{keyword}{const}\ json::parse\_error\&\ e)\ \{}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ vector;}
\DoxyCodeLine{00163\ \ \ \ \ \}}
\DoxyCodeLine{00164\ }
\DoxyCodeLine{00165\ \ \ \ \ \textcolor{keyword}{auto}\&\ rooms\ =\ returnOutput[\textcolor{stringliteral}{"{}joined\_rooms"{}}];}
\DoxyCodeLine{00166\ }
\DoxyCodeLine{00167\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ it\ =\ rooms.begin();\ it\ !=\ rooms.end();\ ++it)\ \{}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classleet_1_1Room_1_1Room}{leet::Room::Room}}\ room;}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ room.\mbox{\hyperlink{classleet_1_1Room_1_1Room_a845bb4727d6c821e8d69a15ad0e2eb1f}{roomID}}\ =\ it.value();}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ vector.push\_back(room);}
\DoxyCodeLine{00171\ \ \ \ \ \}}
\DoxyCodeLine{00172\ }
\DoxyCodeLine{00173\ \ \ \ \ \textcolor{keywordflow}{return}\ vector;}
\DoxyCodeLine{00174\ \}}
\DoxyCodeLine{00175\ }
\DoxyCodeLine{00176\ \textcolor{comment}{/*\ Returns\ an\ array\ of\ all\ rooms\ in\ a\ space\ */}}
\DoxyCodeLine{00177\ \textcolor{keyword}{const}\ std::vector<leet::Room::Room>\ \mbox{\hyperlink{namespaceleet_a9819e1abc2ed3b322de730a89936ea97}{leet::returnRoomsInSpace}}(\mbox{\hyperlink{classleet_1_1User_1_1CredentialsResponse}{leet::User::CredentialsResponse}}*\ resp,\ \textcolor{keyword}{const}\ std::string\&\ spaceID,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ Limit)\ \{}
\DoxyCodeLine{00178\ \ \ \ \ \textcolor{keyword}{using\ }json\ =\ nlohmann::json;}
\DoxyCodeLine{00179\ \ \ \ \ std::vector<leet::Room::Room>\ rooms;}
\DoxyCodeLine{00180\ \ \ \ \ \textcolor{keywordflow}{if}\ (spaceID[0]\ !=\ \textcolor{charliteral}{'!'})\ \{}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ rooms;}
\DoxyCodeLine{00182\ \ \ \ \ \}}
\DoxyCodeLine{00183\ }
\DoxyCodeLine{00184\ \ \ \ \ \textcolor{keyword}{const}\ std::string\ Output\ \{\ \mbox{\hyperlink{namespaceleet_a87681d6edf2064da9cf4df3dcb3ac67e}{leet::invokeRequest\_Get}}(\mbox{\hyperlink{namespaceleet_abf8deb3b48c9f7322aa6654885946738}{leet::getAPI}}(\textcolor{stringliteral}{"{}/\_matrix/client/v1/rooms/"{}}\ +\ spaceID\ +\ \textcolor{stringliteral}{"{}/hierarchy?limit="{}}\ +\ std::to\_string(Limit)),\ resp-\/>\mbox{\hyperlink{classleet_1_1User_1_1CredentialsResponse_ae4d15192559f009ad966de4bc9cdf58a}{accessToken}})\ \};}
\DoxyCodeLine{00185\ \ \ \ \ json\ returnOutput;}
\DoxyCodeLine{00186\ }
\DoxyCodeLine{00187\ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ returnOutput\ =\ json::parse(Output);}
\DoxyCodeLine{00189\ \ \ \ \ \}\ \textcolor{keywordflow}{catch}\ (\textcolor{keyword}{const}\ json::parse\_error\&\ e)\ \{}
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ rooms;}
\DoxyCodeLine{00191\ \ \ \ \ \}}
\DoxyCodeLine{00192\ }
\DoxyCodeLine{00193\ \ \ \ \ \textcolor{keyword}{auto}\&\ room\ =\ returnOutput[\textcolor{stringliteral}{"{}rooms"{}}];}
\DoxyCodeLine{00194\ }
\DoxyCodeLine{00195\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ it\ =\ room.begin();\ it\ !=\ room.end();\ ++it)\ \{}
\DoxyCodeLine{00196\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classleet_1_1Room_1_1Room}{leet::Room::Room}}\ room;}
\DoxyCodeLine{00197\ }
\DoxyCodeLine{00198\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (it.value().contains(\textcolor{stringliteral}{"{}room\_id"{}}))\ room.\mbox{\hyperlink{classleet_1_1Room_1_1Room_a845bb4727d6c821e8d69a15ad0e2eb1f}{roomID}}\ =\ it.value()[\textcolor{stringliteral}{"{}room\_id"{}}];}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (it.value().contains(\textcolor{stringliteral}{"{}join\_rule"{}}))\ room.\mbox{\hyperlink{classleet_1_1Room_1_1Room_ad0ab315f7274216739745338efe29f07}{joinRule}}\ =\ it.value()[\textcolor{stringliteral}{"{}join\_rule"{}}];}
\DoxyCodeLine{00200\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (it.value().contains(\textcolor{stringliteral}{"{}avatar\_url"{}}))\ room.\mbox{\hyperlink{classleet_1_1Room_1_1Room_ab1052fe37c147c30584aff43b4b069ff}{avatarURL}}\ =\ it.value()[\textcolor{stringliteral}{"{}avatar\_url"{}}];}
\DoxyCodeLine{00201\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (it.value().contains(\textcolor{stringliteral}{"{}canonical\_alias"{}}))\ room.\mbox{\hyperlink{classleet_1_1Room_1_1Room_a0538af516a75049404ec9539fe7fb840}{Alias}}\ =\ it.value()[\textcolor{stringliteral}{"{}canonical\_alias"{}}];}
\DoxyCodeLine{00202\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (it.value().contains(\textcolor{stringliteral}{"{}name"{}}))\ room.\mbox{\hyperlink{classleet_1_1Room_1_1Room_a6b5746c5c53d42034dec46e2cf6189de}{Name}}\ =\ it.value()[\textcolor{stringliteral}{"{}name"{}}];}
\DoxyCodeLine{00203\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (it.value().contains(\textcolor{stringliteral}{"{}num\_joined\_members"{}}))\ room.\mbox{\hyperlink{classleet_1_1Room_1_1Room_af13dd9a222670785bce39a8f37781261}{memberCount}}\ =\ it.value()[\textcolor{stringliteral}{"{}num\_joined\_members"{}}];}
\DoxyCodeLine{00204\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (it.value().contains(\textcolor{stringliteral}{"{}topic"{}}))\ room.\mbox{\hyperlink{classleet_1_1Room_1_1Room_a5c8cea2c4db4c9b61ae036cc1916bc1e}{Topic}}\ =\ it.value()[\textcolor{stringliteral}{"{}topic"{}}];}
\DoxyCodeLine{00205\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (it.value().contains(\textcolor{stringliteral}{"{}guest\_can\_join"{}}))\ room.\mbox{\hyperlink{classleet_1_1Room_1_1Room_ab59f5c2b57fde7afa34889351df89487}{guestCanJoin}}\ =\ it.value()[\textcolor{stringliteral}{"{}guest\_can\_join"{}}];}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (it.value().contains(\textcolor{stringliteral}{"{}world\_readable"{}}))\ room.\mbox{\hyperlink{classleet_1_1Room_1_1Room_a298b5a68814b235f8a4b06b9c53ce037}{worldReadable}}\ =\ it.value()[\textcolor{stringliteral}{"{}world\_readable"{}}];}
\DoxyCodeLine{00207\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (it.value().contains(\textcolor{stringliteral}{"{}room\_type"{}}))\ room.\mbox{\hyperlink{classleet_1_1Room_1_1Room_aaeec2e60131518470891846c91383e99}{roomType}}\ =\ it.value()[\textcolor{stringliteral}{"{}room\_type"{}}];}
\DoxyCodeLine{00208\ }
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ rooms.push\_back(room);}
\DoxyCodeLine{00210\ \ \ \ \ \}}
\DoxyCodeLine{00211\ }
\DoxyCodeLine{00212\ \ \ \ \ \textcolor{keywordflow}{return}\ rooms;}
\DoxyCodeLine{00213\ \}}
\DoxyCodeLine{00214\ }
\DoxyCodeLine{00215\ \textcolor{comment}{/*\ Returns\ a\ vector\ of\ all\ spaces\ */}}
\DoxyCodeLine{00216\ \textcolor{keyword}{const}\ std::vector<leet::Space::Space>\ \mbox{\hyperlink{namespaceleet_a70a7b20cb7a7c238754013b4c422afb7}{leet::returnSpaces}}(\mbox{\hyperlink{classleet_1_1User_1_1CredentialsResponse}{leet::User::CredentialsResponse}}*\ resp,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ Limit)\ \{}
\DoxyCodeLine{00217\ \ \ \ \ std::vector<leet::Space::Space>\ spaces;}
\DoxyCodeLine{00218\ \ \ \ \ std::vector<leet::Room::Room>\ rooms\ =\ \mbox{\hyperlink{namespaceleet_ae4179f205bbcae31f1332c5daff19630}{leet::returnRoomIDs}}(resp);}
\DoxyCodeLine{00219\ }
\DoxyCodeLine{00220\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ room\ :\ rooms)\ \{\ \textcolor{comment}{//\ each\ room\ id}}
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classleet_1_1Space_1_1Space}{leet::Space::Space}}\ space;}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ std::vector<leet::Room::Room>\ roomsInSpace\ =\ \mbox{\hyperlink{namespaceleet_a9819e1abc2ed3b322de730a89936ea97}{leet::returnRoomsInSpace}}(resp,\ room.roomID,\ Limit);}
\DoxyCodeLine{00223\ }
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ roomInSpace\ :\ roomsInSpace)\ \{\ \textcolor{comment}{//\ each\ room\ in\ the\ space}}
\DoxyCodeLine{00225\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (roomInSpace.roomType.compare(\textcolor{stringliteral}{"{}m.space"{}}))\ \{}
\DoxyCodeLine{00226\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ space.\mbox{\hyperlink{classleet_1_1Space_1_1Space_a30dac192936b2a8763e36115850c2c4a}{Rooms}}.push\_back(roomInSpace);}
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00228\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00229\ }
\DoxyCodeLine{00230\ \ \ \ \ \ \ \ \ \ \ \ \ space.\mbox{\hyperlink{classleet_1_1Space_1_1Space_a52764052510fc54888847af4db7d729a}{spaceID}}\ =\ roomInSpace.roomID;}
\DoxyCodeLine{00231\ \ \ \ \ \ \ \ \ \ \ \ \ space.\mbox{\hyperlink{classleet_1_1Space_1_1Space_aa6a2dcb28ff823991d16f8c1841e70c1}{joinRule}}\ =\ roomInSpace.joinRule;}
\DoxyCodeLine{00232\ \ \ \ \ \ \ \ \ \ \ \ \ space.\mbox{\hyperlink{classleet_1_1Space_1_1Space_aff9b4f7a0caf0cc07690975bef9c01b0}{avatarURL}}\ =\ roomInSpace.avatarURL;}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ \ \ \ \ space.\mbox{\hyperlink{classleet_1_1Space_1_1Space_a604b0077380d6603afe00b176795b40d}{Alias}}\ =\ roomInSpace.Alias;}
\DoxyCodeLine{00234\ \ \ \ \ \ \ \ \ \ \ \ \ space.\mbox{\hyperlink{classleet_1_1Space_1_1Space_a6129d6d781a3af69cb6e1d0eb6fa6fa6}{Name}}\ =\ roomInSpace.Name;}
\DoxyCodeLine{00235\ \ \ \ \ \ \ \ \ \ \ \ \ space.\mbox{\hyperlink{classleet_1_1Space_1_1Space_a2898d95d87f84676063aac02fdf17367}{memberCount}}\ =\ roomInSpace.memberCount;}
\DoxyCodeLine{00236\ \ \ \ \ \ \ \ \ \ \ \ \ space.\mbox{\hyperlink{classleet_1_1Space_1_1Space_a4114754daba01833bff6e1c58c13b974}{Topic}}\ =\ roomInSpace.Topic;}
\DoxyCodeLine{00237\ \ \ \ \ \ \ \ \ \ \ \ \ space.\mbox{\hyperlink{classleet_1_1Space_1_1Space_ad239a67124112092cfc4bd7db6127de3}{guestCanJoin}}\ =\ roomInSpace.guestCanJoin;}
\DoxyCodeLine{00238\ \ \ \ \ \ \ \ \ \ \ \ \ space.\mbox{\hyperlink{classleet_1_1Space_1_1Space_aaaa1ca02f50c37b566ef6146f87d17ce}{worldReadable}}\ =\ roomInSpace.worldReadable;}
\DoxyCodeLine{00239\ }
\DoxyCodeLine{00240\ \ \ \ \ \ \ \ \ \ \ \ \ space.\mbox{\hyperlink{classleet_1_1Space_1_1Space_a30dac192936b2a8763e36115850c2c4a}{Rooms}}.push\_back(roomInSpace);}
\DoxyCodeLine{00241\ }
\DoxyCodeLine{00242\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00243\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00244\ }
\DoxyCodeLine{00245\ \ \ \ \ \ \ \ \ spaces.push\_back(space);}
\DoxyCodeLine{00246\ \ \ \ \ \}}
\DoxyCodeLine{00247\ }
\DoxyCodeLine{00248\ \ \ \ \ \textcolor{keywordflow}{return}\ spaces;}
\DoxyCodeLine{00249\ \}}
\DoxyCodeLine{00250\ }
\DoxyCodeLine{00251\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespaceleet_a97a051b8d6cbb32e4cb8e9e8562f81fd}{leet::toggleTyping}}(\mbox{\hyperlink{classleet_1_1User_1_1CredentialsResponse}{leet::User::CredentialsResponse}}*\ resp,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ Timeout,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ Typing,\ \mbox{\hyperlink{classleet_1_1Room_1_1Room}{leet::Room::Room}}*\ room)\ \{}
\DoxyCodeLine{00252\ \ \ \ \ \textcolor{keyword}{using\ }json\ =\ nlohmann::json;}
\DoxyCodeLine{00253\ }
\DoxyCodeLine{00254\ \ \ \ \ json\ list;}
\DoxyCodeLine{00255\ }
\DoxyCodeLine{00256\ \ \ \ \ list[\textcolor{stringliteral}{"{}timeout"{}}]\ =\ Timeout;}
\DoxyCodeLine{00257\ \ \ \ \ list[\textcolor{stringliteral}{"{}typing"{}}]\ =\ Typing;}
\DoxyCodeLine{00258\ }
\DoxyCodeLine{00259\ \ \ \ \ \textcolor{keyword}{const}\ std::string\ Output\ \{\ \mbox{\hyperlink{namespaceleet_aa3853464d166cde6fa97f8dfb9e2398f}{leet::invokeRequest\_Put}}(\mbox{\hyperlink{namespaceleet_abf8deb3b48c9f7322aa6654885946738}{leet::getAPI}}(\textcolor{stringliteral}{"{}/\_matrix/client/v3/rooms/"{}}\ +\ room-\/>\mbox{\hyperlink{classleet_1_1Room_1_1Room_a845bb4727d6c821e8d69a15ad0e2eb1f}{roomID}}\ +\ \textcolor{stringliteral}{"{}/typing/"{}}\ +\ resp-\/>\mbox{\hyperlink{classleet_1_1User_1_1CredentialsResponse_a7561824b6e56efae7257ac9995d43846}{userID}}),\ list.dump(),\ resp-\/>\mbox{\hyperlink{classleet_1_1User_1_1CredentialsResponse_ae4d15192559f009ad966de4bc9cdf58a}{accessToken}})\ \};}
\DoxyCodeLine{00260\ }
\DoxyCodeLine{00261\ \ \ \ \ json\ reqOutput;}
\DoxyCodeLine{00262\ }
\DoxyCodeLine{00263\ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{00264\ \ \ \ \ \ \ \ \ reqOutput\ =\ \{\ json::parse(Output)\ \};}
\DoxyCodeLine{00265\ \ \ \ \ \}\ \textcolor{keywordflow}{catch}\ (\textcolor{keyword}{const}\ json::parse\_error\&\ e)\ \{}
\DoxyCodeLine{00266\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00267\ \ \ \ \ \}}
\DoxyCodeLine{00268\ }
\DoxyCodeLine{00269\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ output\ :\ reqOutput)\ \{}
\DoxyCodeLine{00270\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceleet_aa20a9fa2de98421d60165559a8a23f76}{leet::errorCode}}\ =\ 0;}
\DoxyCodeLine{00271\ }
\DoxyCodeLine{00272\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (output[\textcolor{stringliteral}{"{}errcode"{}}].is\_string())\ \{}
\DoxyCodeLine{00273\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceleet_aa20a9fa2de98421d60165559a8a23f76}{leet::errorCode}}\ =\ 1;}
\DoxyCodeLine{00274\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceleet_ae7fadb8f554b82e37512ece5f451e345}{leet::Error}}\ =\ output[\textcolor{stringliteral}{"{}errcode"{}}].get<std::string>();}
\DoxyCodeLine{00275\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (output[\textcolor{stringliteral}{"{}error"{}}].is\_string())\ \mbox{\hyperlink{namespaceleet_aca8cf23cb2471b07f1ee22a2077b5b37}{leet::friendlyError}}\ =\ output[\textcolor{stringliteral}{"{}error"{}}].get<std::string>();}
\DoxyCodeLine{00276\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00277\ \ \ \ \ \}}
\DoxyCodeLine{00278\ \}}
\DoxyCodeLine{00279\ }
\DoxyCodeLine{00280\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespaceleet_a75c8d9291eb204589c1928ea607dd95b}{leet::inviteUserToRoom}}(\mbox{\hyperlink{classleet_1_1User_1_1CredentialsResponse}{leet::User::CredentialsResponse}}*\ resp,\ \mbox{\hyperlink{classleet_1_1Room_1_1Room}{leet::Room::Room}}*\ room,\ \textcolor{keyword}{const}\ std::string\&\ Reason)\ \{}
\DoxyCodeLine{00281\ \ \ \ \ \textcolor{keyword}{using\ }json\ =\ nlohmann::json;}
\DoxyCodeLine{00282\ }
\DoxyCodeLine{00283\ \ \ \ \ json\ request;}
\DoxyCodeLine{00284\ }
\DoxyCodeLine{00285\ \ \ \ \ request[\textcolor{stringliteral}{"{}reason"{}}]\ =\ Reason;}
\DoxyCodeLine{00286\ \ \ \ \ request[\textcolor{stringliteral}{"{}user\_id"{}}]\ =\ resp-\/>\mbox{\hyperlink{classleet_1_1User_1_1CredentialsResponse_a7561824b6e56efae7257ac9995d43846}{userID}};}
\DoxyCodeLine{00287\ }
\DoxyCodeLine{00288\ \ \ \ \ \textcolor{keyword}{const}\ std::string\ Output\ \{\ \mbox{\hyperlink{namespaceleet_aa88a91a144b2176d9ce3c4cad3c45bab}{leet::invokeRequest\_Post}}(\mbox{\hyperlink{namespaceleet_abf8deb3b48c9f7322aa6654885946738}{leet::getAPI}}(\textcolor{stringliteral}{"{}/\_matrix/client/v3/rooms/"{}}\ +\ room-\/>\mbox{\hyperlink{classleet_1_1Room_1_1Room_a845bb4727d6c821e8d69a15ad0e2eb1f}{roomID}}\ +\ \textcolor{stringliteral}{"{}/invite"{}}),\ request.dump(),\ resp-\/>\mbox{\hyperlink{classleet_1_1User_1_1CredentialsResponse_ae4d15192559f009ad966de4bc9cdf58a}{accessToken}})\ \};}
\DoxyCodeLine{00289\ \ \ \ \ json\ reqOutput;}
\DoxyCodeLine{00290\ }
\DoxyCodeLine{00291\ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{00292\ \ \ \ \ \ \ \ \ reqOutput\ =\ \{\ json::parse(Output)\ \};}
\DoxyCodeLine{00293\ \ \ \ \ \}\ \textcolor{keywordflow}{catch}\ (\textcolor{keyword}{const}\ json::parse\_error\&\ e)\ \{}
\DoxyCodeLine{00294\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00295\ \ \ \ \ \}}
\DoxyCodeLine{00296\ }
\DoxyCodeLine{00297\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ output\ :\ reqOutput)\ \{}
\DoxyCodeLine{00298\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceleet_aa20a9fa2de98421d60165559a8a23f76}{leet::errorCode}}\ =\ 0;}
\DoxyCodeLine{00299\ }
\DoxyCodeLine{00300\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (output[\textcolor{stringliteral}{"{}errcode"{}}].is\_string())\ \{}
\DoxyCodeLine{00301\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceleet_aa20a9fa2de98421d60165559a8a23f76}{leet::errorCode}}\ =\ 1;}
\DoxyCodeLine{00302\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceleet_ae7fadb8f554b82e37512ece5f451e345}{leet::Error}}\ =\ output[\textcolor{stringliteral}{"{}errcode"{}}].get<std::string>();}
\DoxyCodeLine{00303\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (output[\textcolor{stringliteral}{"{}error"{}}].is\_string())\ \mbox{\hyperlink{namespaceleet_aca8cf23cb2471b07f1ee22a2077b5b37}{leet::friendlyError}}\ =\ output[\textcolor{stringliteral}{"{}error"{}}].get<std::string>();}
\DoxyCodeLine{00304\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00305\ \ \ \ \ \}}
\DoxyCodeLine{00306\ \}}

\end{DoxyCode}
